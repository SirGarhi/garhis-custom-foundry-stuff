{"name":"GG_ThrummingExplosion","type":"script","author":"eRgA1h4qRUhZdwPz","img":"icons/svg/dice-target.svg","scope":"global","command":"const lastArg = args[args.length-1];\nif (args[0] == \"off\" && args[1][\"expiry-reason\"] == \"midi-qol:isMoved\") {\n\tlet theActor = await fromUuid(lastArg.actorUuid);\n\tif (theActor.actor) theActor = theActor.actor;\n\tlet sourceActor = await fromUuid(lastArg.efData.origin);\n\tconsole.log(theActor);\n\tconsole.log(sourceActor);\n\tlet damageDice = (Math.floor((sourceActor.system.details.level+1)/6)+1);\n\tconsole.log(damageDice);\n\tconst itemData = {\n\t\tname: \"Thrumming Explosion\",\n\t\timg: \"icons/magic/sonic/explosion-shock-wave-teal.webp\",\n\t\ttype: \"spell\",\n        effects: [],\n        flags: {\n            \"midi-qol\": {\n                noProvokeReaction: true, // no reactions triggered\n                onUseMacroName: null // \n            },\n\t\t\t\"midiProperties\": {\n\t\t\t\tautoFailFriendly: false,\n\t\t\t\tconcentration: false,\n\t\t\t\tcritOther: false,\n\t\t\t\tfulldam: false,\n\t\t\t\thalfdam: false,\n\t\t\t\tignoreTotalCover: false,\n\t\t\t\tmagicdam: true,\n\t\t\t\tmagiceffect: false,\n\t\t\t\tnodam: false,\n\t\t\t\toffHandWeapon: false,\n\t\t\t\trollOther: false,\n\t\t\t\ttoggleEffect: false\n\t\t\t},\n        },\n\t\tsystem: {\n            actionType: \"other\",\n            damage: { parts: [[damageDice+\"d8\", \"thunder\"]] },\n            target: {type: \"self\"},\n            duration: {units: \"inst\", value: undefined},\n\t\t\tdescription: {value: \"\" },\n\t\t\tlevel: 0,\n        }\n\t};\n\tconsole.log(theActor);\n\tconst tempItem = new CONFIG.Item.documentClass(itemData, { parent: theActor });\n\tconsole.log(tempItem);\n\tconst config = {};\n\tconst options = { showFullCard: false, createWorkflow: true, versatile: false, configureDialog: false };\n\tawait MidiQOL.completeItemUse(tempItem, config, options);\n}","flags":{"core":{"sourceId":"Macro.qwfavbCceRHXvsEp"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676835753611,"modifiedTime":1676842710367,"lastModifiedBy":"eRgA1h4qRUhZdwPz"},"folder":null,"sort":0,"ownership":{"default":0,"eRgA1h4qRUhZdwPz":3},"_id":"Qy7tfFezms1jAxIF"}
{"name":"GG_PotentThrummingExplosion","type":"script","author":"eRgA1h4qRUhZdwPz","img":"icons/svg/dice-target.svg","scope":"global","command":"const lastArg = args[args.length-1];\nif (args[0] == \"off\" && args[1][\"expiry-reason\"] == \"midi-qol:isMoved\") {\n\tlet theActor = await fromUuid(lastArg.actorUuid);\n\tif (theActor.actor) theActor = theActor.actor;\n\tlet sourceActor = await fromUuid(lastArg.efData.origin);\n\tlet spellcasting = sourceActor.system.attributes.spellcasting;\n\tlet mod = sourceActor.system.abilities[spellcasting].mod;\n\tconsole.log(theActor);\n\tconsole.log(sourceActor);\n\tlet damageDice = (Math.floor((sourceActor.system.details.level+1)/6)+1);\n\tconsole.log(damageDice);\n\tconst itemData = {\n\t\tname: \"Thrumming Explosion\",\n\t\timg: \"icons/magic/sonic/explosion-shock-wave-teal.webp\",\n\t\ttype: \"spell\",\n        effects: [],\n        flags: {\n            \"midi-qol\": {\n                noProvokeReaction: true, // no reactions triggered\n                onUseMacroName: null // \n            },\n\t\t\t\"midiProperties\": {\n\t\t\t\tautoFailFriendly: false,\n\t\t\t\tconcentration: false,\n\t\t\t\tcritOther: false,\n\t\t\t\tfulldam: false,\n\t\t\t\thalfdam: false,\n\t\t\t\tignoreTotalCover: false,\n\t\t\t\tmagicdam: true,\n\t\t\t\tmagiceffect: false,\n\t\t\t\tnodam: false,\n\t\t\t\toffHandWeapon: false,\n\t\t\t\trollOther: false,\n\t\t\t\ttoggleEffect: false\n\t\t\t},\n        },\n\t\tsystem: {\n            actionType: \"other\",\n            damage: { parts: [[damageDice+\"d8 + \"+sourceActor.system.bonuses.msak.damage+\" + \"+mod, \"thunder\"]] },\n            target: {type: \"self\"},\n            duration: {units: \"inst\", value: undefined},\n\t\t\tdescription: {value: \"\" },\n\t\t\tlevel: 0,\n        }\n\t};\n\tconsole.log(theActor);\n\tconst tempItem = new CONFIG.Item.documentClass(itemData, { parent: theActor });\n\tconsole.log(tempItem);\n\tconst config = {};\n\tconst options = { showFullCard: false, createWorkflow: true, versatile: false, configureDialog: false };\n\tawait MidiQOL.completeItemUse(tempItem, config, options);\n}","flags":{"core":{"sourceId":"Macro.fPqMkR6dqOxGNRBH"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676840753649,"modifiedTime":1676842712360,"lastModifiedBy":"eRgA1h4qRUhZdwPz"},"folder":null,"sort":0,"ownership":{"default":0,"eRgA1h4qRUhZdwPz":3},"_id":"XpcnxWznCUdoFD0o"}
{"name":"GG_WolverineSerum","type":"script","author":"eRgA1h4qRUhZdwPz","img":"icons/svg/dice-target.svg","scope":"global","command":"let actor = args[0].actor;\nlet maxHP = actor.system.attributes.hp.max;\nif(actor.system.attributes.hp.tempmax) {\n\tmaxHP = maxHP + actor.system.attributes.hp.tempmax;\n}\nlet halfHP = Math.floor(maxHP/2)\nif( actor.system.attributes.hp.value < halfHP ) {\n  \tgame.dfreds.effectInterface.addEffect({ effectName: 'WolverineDamageBonus', uuid: args[0].actorUuid, origin: args[0].actorUuid });\n}","flags":{"core":{"sourceId":"Macro.CAcpjh3rZK0EC2yh"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676869902999,"modifiedTime":1676871028812,"lastModifiedBy":"eRgA1h4qRUhZdwPz"},"folder":null,"sort":0,"ownership":{"default":0,"eRgA1h4qRUhZdwPz":3},"_id":"l4zBLEnzdbHjzquI"}
